{{define "settings-content"}}
<div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6">Settings</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Family Members -->
        <a href="/settings/family" class="card bg-base-100 shadow-md hover:shadow-lg transition-shadow cursor-pointer">
            <div class="card-body">
                <h2 class="card-title">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    Family Members
                </h2>
                <p class="text-base-content/60">Add, edit, and manage family members and PINs.</p>
            </div>
        </a>

        <!-- Kiosk Mode -->
        <div class="card bg-base-100 shadow-md">
            <div class="card-body">
                <h2 class="card-title">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    Kiosk Mode
                </h2>
                <div id="kiosk-settings-container"
                     hx-get="/partials/settings/kiosk"
                     hx-trigger="load"
                     hx-swap="innerHTML">
                    <span class="loading loading-spinner loading-sm"></span>
                </div>
            </div>
        </div>

        <!-- Weather Settings -->
        <div class="card bg-base-100 shadow-md">
            <div class="card-body">
                <h2 class="card-title">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                    </svg>
                    Weather
                </h2>
                <p class="text-base-content/60">Configure via environment variables: <code class="text-xs">GAMWICH_WEATHER_LAT</code>, <code class="text-xs">GAMWICH_WEATHER_LON</code>, <code class="text-xs">GAMWICH_WEATHER_UNITS</code></p>
            </div>
        </div>
    </div>
</div>
{{end}}

{{define "kiosk-settings-form"}}
<form hx-put="/partials/settings/kiosk"
      hx-target="#kiosk-settings-container"
      hx-swap="innerHTML"
      class="space-y-4"
      x-data="{ idleTimeout: '{{index . "idle_timeout_minutes"}}', quietEnabled: {{if eq (index . "quiet_hours_enabled") "true"}}true{{else}}false{{end}} }">

    <!-- Idle Timeout -->
    <div class="form-control">
        <label class="label">
            <span class="label-text font-medium">Idle timeout</span>
            <span class="label-text-alt" x-text="idleTimeout + ' min'"></span>
        </label>
        <input type="range" name="idle_timeout_minutes"
               min="1" max="30" step="1"
               class="range range-primary range-sm"
               x-model="idleTimeout">
    </div>

    <!-- Quiet Hours -->
    <div class="form-control">
        <label class="label cursor-pointer">
            <span class="label-text font-medium">Quiet hours (night mode)</span>
            <input type="checkbox" class="toggle toggle-primary"
                   x-model="quietEnabled"
                   @change="$el.value = quietEnabled ? 'true' : 'false'">
            <input type="hidden" name="quiet_hours_enabled" :value="quietEnabled ? 'true' : 'false'">
        </label>
    </div>

    <div x-show="quietEnabled" class="flex gap-3 items-center">
        <div class="form-control flex-1">
            <label class="label"><span class="label-text text-sm">Start</span></label>
            <input type="time" name="quiet_hours_start"
                   value="{{index . "quiet_hours_start"}}"
                   class="input input-bordered input-sm w-full">
        </div>
        <div class="form-control flex-1">
            <label class="label"><span class="label-text text-sm">End</span></label>
            <input type="time" name="quiet_hours_end"
                   value="{{index . "quiet_hours_end"}}"
                   class="input input-bordered input-sm w-full">
        </div>
    </div>

    <!-- Burn-in Prevention -->
    <div class="form-control">
        <label class="label cursor-pointer">
            <span class="label-text font-medium">Burn-in prevention</span>
            <input type="hidden" name="burn_in_prevention" value="{{index . "burn_in_prevention"}}">
            <input type="checkbox" class="toggle toggle-primary"
                   {{if eq (index . "burn_in_prevention") "true"}}checked{{end}}
                   @change="$el.previousElementSibling.value = $el.checked ? 'true' : 'false'">
        </label>
        <p class="text-xs text-base-content/50 ml-1">Subtle pixel shift during idle to prevent screen burn-in.</p>
    </div>

    <button type="submit" class="btn btn-primary btn-sm w-full">Save</button>
</form>
{{end}}
